script(type='text/javascript', src='https://js.stripe.com/v2/')
script(type='text/javascript', src='/javascripts/purchase.js')

//displays food card
mixin food_card(food, img_path)
  div(class=['card', 'food-card', 'blue-grey', 'lighten-5'])

    div(class=['card-image'])
      img(src=food.images[0])
      span(class=['card-title'])
        a(class=['waves-light', 'btn', 'blue-grey', 'darken-2', 'activator']) #{food.name}

    div(class=['card-content'])
      span(class=['card-title', 'activator'])
        i(class=['material-icons', 'right', 'small']) more_vert
        h5(class='activator') #{food.description}

    div(class=['card-reveal', 'blue-grey', 'lighten-5'])
      div(class=['card-title', 'grey-text', 'text-darken-4'])
        i(class=['material-icons', 'right', 'small']) close
        h5 #{food.name}
        h6 #{food.description}
        h6 #[b #{food.portionsAvailable}] servings ready at
          | #[b #{" $" + parseFloat(Math.round(food.price * 100) / 100).toFixed(2)}] each.
        h6 #{food.address.number + " " + food.address.street + ", " + food.address.city}

      span(class='content-bottom')
        div(class=['row'])
          form(action='/purchases/create', method='POST', id='payment-form')
            span(class='payment-errors')
            div(class='row')
              div(class=['col', 's6'])
                input(placeholder='Credit Card Number', data-stripe='number')
              div(class=['col', 's6'])
                input(placeholder='CVC', data-stripe='cvc')
            div(class='row')
              div(class=['col', 's6'])
                input(type='text', placeholder='Expiration Year', data-stripe='exp-year')
              div(class=['col', 's6'])
                input(type='text', placeholder='Expiration Month', data-stripe='exp-month')
            button(class=['btn-large', 'waves-effect',
              'waves-light', 'col', 's12'], type='submit') Purchase your food.
              i(class=['material-icons', 'right']) send
